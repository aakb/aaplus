{% extends "AppBundle::base.html.twig" %}

{% block body %}

  <div class="row">
    <div class="col-md-12">

      <h2>{{ 'common.current_buildings' | trans }}</h2>
      {% if current_buildings is empty %}
        <div class="alert alert-warning" role="alert">{{ 'bygninger.strings.ingen' | trans }}</div>
      {% else %}
        <form name="search" action="{{ path('bygning') }}" method="get">
          <table class="table table-condensed table-hover">
            <tr>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.navn'|trans, 'b.navn') }}</th>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.adresse'|trans, 'b.adresse') }}</th>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.postBy'|trans, 'b.postBy') }}</th>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.updatedAt'|trans, 'b.updatedAt') }}</th>
              <th></th>
            </tr>
            {% for r in current_buildings %}
              <tr>
                <td>{{ r.bygning.navn }}</td>
                <td>{{ r.bygning.adresse }}</td>
                <td>{{ r.bygning.postBy }}</td>
                <td>{{ r.updatedAt | date('F j, Y H:i') }}</td>
                <td class="text-right">
                  <a href="{{ path('rapport_show', { 'id': r.id }) }}" class="btn btn-primary btn-xs">{{ 'rapporter.actions.show' | trans }}</a>
                </td>
              </tr>
            {% endfor %}
          </table>
        </form>
      {% endif %}

      <div class="row">
        <div class="col-md-12">
          {{ knp_pagination_render(current_buildings, "", {}, { "prev_label": "«", "next_label": "»", "first_label": "««", "last_label": "»»"}) }}
        </div>
      </div>

    </div>
  </div>

  <div class="row">
    <div class="col-md-12">

      <h2>{{ 'common.finished_buildings' | trans }}</h2>
      {% if finished_buildings is empty %}
        <div class="alert alert-warning" role="alert">{{ 'bygninger.strings.ingen' | trans }}</div>
      {% else %}
        <form name="search" action="{{ path('bygning') }}" method="get">
          <table class="table table-condensed table-hover">
            <tr>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.navn'|trans, 'b.navn') }}</th>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.adresse'|trans, 'b.adresse') }}</th>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.postBy'|trans, 'b.postBy') }}</th>
              <th>{{ knp_pagination_sortable(current_buildings, 'appbundle.bygning.updatedAt'|trans, 'b.updatedAt') }}</th>
              <th></th>
            </tr>
            {% for r in finished_buildings %}
              <tr>
                <td>{{ r.bygning.navn }}</td>
                <td>{{ r.bygning.adresse }}</td>
                <td>{{ r.bygning.postBy }}</td>
                <td>{{ r.updatedAt | date('F j, Y H:i') }}</td>
                <td class="text-right">
                  <a href="{{ path('rapport_show', { 'id': r.id }) }}" class="btn btn-default btn-xs">{{ 'rapporter.actions.show' | trans }}</a>
                </td>
              </tr>
            {% endfor %}
          </table>
        </form>
      {% endif %}

      <div class="row">
        <div class="col-md-12">
          {{ knp_pagination_render(current_buildings, "", {}, { "prev_label": "«", "next_label": "»", "first_label": "««", "last_label": "»»"}) }}
        </div>
      </div>

    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <h2>{{ 'common.summary' | trans }}</h2>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3>{{ 'dashboard.current' | trans }}</h3>
      <ul class="list-unstyled">
        <li>{{ 'dashboard.totalareal' | trans }}: {{ summary_current['totalareal'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseEl' | trans }}: {{ summary_current['besparelseEl'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseVarmeGUF' | trans }}: {{ summary_current['besparelseVarmeGUF'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseVarmeGAF' | trans }}: {{ summary_current['besparelseVarmeGAF'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseCO2' | trans }}: {{ summary_current['besparelseCO2'] |number_format }}</li>
      </ul>
    </div>
    <div class="col-md-6">
      <h3>{{ 'dashboard.finished' | trans }}</h3>
      <ul class="list-unstyled">
        <li>{{ 'dashboard.totalareal' | trans }}: {{ summary_finished['totalareal'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseEl' | trans }}: {{ summary_finished['besparelseEl'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseVarmeGUF' | trans }}: {{ summary_finished['besparelseVarmeGUF'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseVarmeGAF' | trans }}: {{ summary_finished['besparelseVarmeGAF'] |number_format }}</li>
        <li>{{ 'dashboard.besparelseCO2' | trans }}: {{ summary_finished['besparelseCO2'] |number_format }}</li>
      </ul>
    </div>
  </div>

{% endblock %}
