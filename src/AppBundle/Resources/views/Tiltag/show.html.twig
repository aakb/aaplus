{% extends 'AppBundle::base.html.twig' %}

{% macro header(key) %}
  {% set calculation = key|get_calculation %}

  <th class="rotate">
    <div>
      {% if calculation is null %}
        <span>{{ key | trans }}</span>
      {% else %}
        <span data-calculation="{{ calculation }}">{{ key | trans }}</span>
      {% endif %}
    </div>
  </th>
{% endmacro %}

{% import _self as helper %}

{% block body -%}
  <h1>{% if entity.title is empty %}{{ 'tiltag.title.missing' | trans }}{% else %}{{ entity.title }}{% endif %}</h1>

  <table class="table table-condensed">
    <tbody>
      <tr>
        <th>{{ 'appbundle.tiltag.rapport' | trans }}</th>
        <td><a href="{{ path('rapport_show', { id: entity.rapport.id }) }}">{{ entity.rapport }}</a></td>
      </tr>
    </tbody>
  </table>

	<div role="tabpanel">

    <ul class="nav nav-pills" role="tablist">
      <li role="presentation" class="active"><a href="#oversigt" aria-controls="Oversigt" role="tab" data-toggle="tab">{{ 'tiltag.strings.oversigt' | trans }}</a></li>
      <li role="presentation"><a href="#forhold" aria-controls="Forhold" role="tab" data-toggle="tab">{{ 'tiltag.strings.forhold' | trans }}</a></li>
      <li role="presentation"><a href="#detailark" aria-controls="Detailark" role="tab" data-toggle="tab">{{ 'tiltag.strings.detailark' | trans }}</a></li>
    </ul>

    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="oversigt">
        {% include 'AppBundle:Tiltag:show-include.html.twig' %}
      </div>

      <div role="tabpanel" class="tab-pane" id="forhold">
        {% form_theme edit_form 'AppBundle:Form:twocol-form.html.twig' %}
        {{ form(edit_form, { 'style': 'horizontal' }) }}
      </div>

      <div role="tabpanel" class="tab-pane" id="detailark">
        {% block detailark -%}...{% endblock %}
      </div>
    </div>
  </div>

  <form method="POST" action="{{ path('regning_create', { 'id': entity.id}) }}" class="inline-block">
    <button type="submit" class="btn btn-default">{{ icon('plus') }} {{ ('tiltag.strings.regning') | trans }}</button>
  </form>

{% endblock %}
